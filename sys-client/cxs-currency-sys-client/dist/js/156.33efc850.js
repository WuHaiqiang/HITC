"use strict";(self["webpackChunkcxs_currency_sys_client"]=self["webpackChunkcxs_currency_sys_client"]||[]).push([[156],{67156:function(r,e,s){s.r(e),s.d(e,{default:function(){return d}});var o=function(){var r=this,e=r._self._c;return e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:r.ruleForm,"status-icon":"",rules:r.rules,"label-width":"75px"}},[e("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:r.ruleForm.oldPassword,callback:function(e){r.$set(r.ruleForm,"oldPassword",e)},expression:"ruleForm.oldPassword"}})],1),e("el-form-item",{attrs:{label:"新密码",prop:"password"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:r.ruleForm.password,callback:function(e){r.$set(r.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),e("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:r.ruleForm.checkPass,callback:function(e){r.$set(r.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("提交")]),e("el-button",{on:{click:function(e){return r.resetForm("ruleForm")}}},[r._v("重置")])],1)],1)},t=[],l=s(92549),a=s(43394),u={name:"UpdatePwd",data(){var r=(r,e,s)=>{if(!e)return s(new Error("旧密码不能为空"));(0,l.JW)({oldPassword:a.A.encrypt(e)}).then((r=>{if(!r.data)return s(new Error("旧密码不正确"));s()}))},e=(r,e,s)=>{""===e?s(new Error("请输入密码")):e.length<6?s(new Error("密码不能少于6位")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),s())},s=(r,e,s)=>{""===e?s(new Error("请再次输入密码")):e!==this.ruleForm.password?s(new Error("两次输入密码不一致!")):s()};return{ruleForm:{password:"",checkPass:"",oldPassword:""},rules:{password:[{validator:e,trigger:"blur"}],checkPass:[{validator:s,trigger:"blur"}],oldPassword:[{validator:r,trigger:"blur"}]}}},methods:{submitForm(r){this.$refs[r].validate((r=>{if(!r)return console.log("error submit!!"),!1;{const{checkPass:r,oldPassword:e,password:s}=this.ruleForm,o={checkPass:a.A.encrypt(r),oldPassword:a.A.encrypt(e),password:a.A.encrypt(s)};(0,l.f3)(o).then((r=>{this.$message.success("密码修改成功,请重新登录"),this.$store.dispatch("auth/logout"),this.$nextTick((()=>{this.$router.replace("/")}))}))}}))},resetForm(r){this.$refs[r].resetFields()}}},c=u,n=s(81656),i=(0,n.A)(c,o,t,!1,null,"db6471dc",null),d=i.exports}}]);