(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e61a070"],{"0bb4":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return o}));var a=n("b775"),i=n("da71");function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:i["a"]+"/admin/notice/getNoticeList",method:"post",data:t})}function c(t){return Object(a["a"])({url:i["a"]+"/admin/notice/getNoticeInfo",method:"get",params:{id:t}})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:i["a"]+"/admin/notice/saveOrUpdateNotice",method:"post",data:t})}function o(t){return Object(a["a"])({url:i["a"]+"/admin/notice/deleteNotice/".concat(t),method:"post"})}},b199:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l}));var a=n("b775"),i=n("da71");function r(t){return Object(a["a"])({url:i["a"]+"/admin/task/getTaskList",method:"post",params:{keyword:t}})}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:i["a"]+"/admin/task/saveOrUpdateTask",method:"post",data:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:i["a"]+"/admin/task/taskOperaHandle",method:"post",data:t})}function o(t){return Object(a["a"])({url:i["a"]+"/admin/task/removeTask/".concat(t),method:"delete"})}function u(t){return Object(a["a"])({url:i["a"]+"/admin/task/executeTask/".concat(t),method:"get"})}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])({url:i["a"]+"/admin/task/getTaskLog",method:"post",data:t})}},f193:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-button",{attrs:{type:"primary"},on:{click:t.handleAddNotice}},[t._v("创建新公告")]),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:t.noticePage.data,border:""}},[n("el-table-column",{attrs:{resizable:!1,align:"center",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){e.scope;var n=e.$index;return[t._v(" "+t._s(n+1)+" ")]}}])}),n("el-table-column",{attrs:{resizable:!1,align:"center",label:"公告标题",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.noticeTitle)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",resizable:!1,label:"创建人",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.user.nickName)+" ")]}}])}),n("el-table-column",{attrs:{resizable:!1,align:"center",label:"是否推送",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{value:1===t.row.isPush,"active-color":"#13ce66","inactive-color":"#ccc"}})]}}])}),n("el-table-column",{attrs:{align:"center",resizable:!1,label:"创建时间",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.publishTime)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",resizable:!1,label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.handleDetail(e)}}},[t._v("详情")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return t.handleEdit(e)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return t.handleDelete(e)}}},[t._v("删除")])]}}])})],1),n("el-dialog",{attrs:{visible:t.detailVisible,title:t.currentNotice.noticeTitle,width:"60%"},on:{"update:visible":function(e){t.detailVisible=e}}},[n("div",[n("v-md-editor",{attrs:{value:t.currentNotice.noticeContent,mode:"preview"}})],1)])],1)},i=[],r=n("c7eb"),c=n("1da1"),s=(n("99af"),n("14d9"),n("0bb4")),o=n("ed08"),u=n("b199"),l={name:"Notice",data:function(){return{listLoading:!1,noticePage:{},noticeList:[],pageQuery:{pageNum:1,pageSize:10,keyword:"",isPush:null},currentNotice:{},detailVisible:!1,detailContent:""}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(s["c"])(this.pageQuery).then((function(e){t.listLoading=!1,t.noticePage=e.data}))},handleAddNotice:function(){this.$router.push({name:"notice-add-etit"})},handleEdit:function(t){this.$router.push({name:"notice-add-etit",params:{id:t.row.id}})},handleDetail:function(t){this.currentNotice=Object(o["c"])(t.row),this.detailVisible=!0},handleDelete:function(t){var e=this,n=(t.$index,t.row);this.$confirm("确定要删除这个公告吗?","删除公告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(c["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])(n.id);case 2:e.$message({type:"success",message:"公告删除成功!"}),e.getList();case 4:case"end":return t.stop()}}),t)})))).catch((function(t){console.error(t)}))},operaHandle:function(t,e){var n=this,a={taskId:t.row.taskId,operaType:e};Object(u["f"])(a).then((function(t){n.$message({type:"success",message:t.msg}),n.getList()}))},confirmTask:function(){var t=this;return Object(c["a"])(Object(r["a"])().mark((function e(){var n,a,i,c,s,o,l;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n="edit"===t.dialogType,!n){e.next=6;break}return e.next=4,Object(u["e"])(t.task);case 4:e.next=13;break;case 6:return t.task.taskId=void 0,e.next=9,Object(u["e"])(t.task);case 9:a=e.sent,i=a.data,t.task.taskId=i.taskId,t.taskList.push(t.task);case 13:c=t.task,s=c.taskDesc,o=c.taskId,l=c.taskName,t.dialogVisible=!1,t.$notify({title:"Success",dangerouslyUseHTMLString:!0,message:"\n            <div>task Id: ".concat(o,"</div>\n            <div>task Name: ").concat(l,"</div>\n            <div>Description: ").concat(s,"</div>\n          "),type:"success"}),t.getList();case 17:case"end":return e.stop()}}),e)})))()}}},d=l,f=n("2877"),b=Object(f["a"])(d,a,i,!1,null,"3e7fcef7",null);e["default"]=b.exports}}]);