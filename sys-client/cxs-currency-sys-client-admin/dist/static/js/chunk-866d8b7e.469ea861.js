(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-866d8b7e"],{"1d9f":function(e,t,n){"use strict";n("8dbd")},"25eb":function(e,t,n){"use strict";var a=n("23e7"),l=n("c20d");a({target:"Number",stat:!0,forced:Number.parseInt!==l},{parseInt:l})},"333d":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},l=[];n("a9e3");Math.easeInOutQuad=function(e,t,n,a){return e/=a/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,n){var a=o(),l=e-a,s=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=s;var o=Math.easeInOutQuad(u,a,l,t);r(o),u<t?i(e):n&&"function"===typeof n&&n()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:10},pageSizes:{type:Array,default:function(){return[5,10,20,30]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},c=u,p=(n("1d9f"),n("2877")),m=Object(p["a"])(c,a,l,!1,null,"7e36e871",null);t["a"]=m.exports},"8dbd":function(e,t,n){},c20d:function(e,t,n){"use strict";var a=n("da84"),l=n("d039"),i=n("e330"),r=n("577e"),o=n("58a8").trim,s=n("5899"),u=a.parseInt,c=a.Symbol,p=c&&c.iterator,m=/^[+-]?0x/i,d=i(m.exec),f=8!==u(s+"08")||22!==u(s+"0x16")||p&&!l((function(){u(Object(p))}));e.exports=f?function(e,t){var n=o(r(e));return u(n,t>>>0||(d(m,n)?16:10))}:u},ca09:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tab-container"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("创建新链接")]),n("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabMapOptions,(function(t){return n("el-tab-pane",{key:t.key,attrs:{label:t.label,name:t.key}},[n("keep-alive",[e.activeName==t.key?n("tab-pane",{attrs:{type:t.key},on:{create:e.showCreatedTimes}}):e._e()],1)],1)})),1),n("el-dialog",{attrs:{title:"创建",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[n("el-form-item",{attrs:{label:"链接名称",prop:"externalLinkName"}},[n("el-input",{model:{value:e.temp.externalLinkName,callback:function(t){e.$set(e.temp,"externalLinkName",t)},expression:"temp.externalLinkName"}})],1),n("el-form-item",{attrs:{label:"链接地址",prop:"externalLinkLink"}},[n("el-input",{model:{value:e.temp.externalLinkLink,callback:function(t){e.$set(e.temp,"externalLinkLink",t)},expression:"temp.externalLinkLink"}})],1),n("el-form-item",{attrs:{label:"链接描述"}},[n("el-input",{model:{value:e.temp.externalLinkDesc,callback:function(t){e.$set(e.temp,"externalLinkDesc",t)},expression:"temp.externalLinkDesc"}})],1),n("el-form-item",{attrs:{label:"链接图标"}},[n("el-input",{model:{value:e.temp.externalLinkIcon,callback:function(t){e.$set(e.temp,"externalLinkIcon",t)},expression:"temp.externalLinkIcon"}})],1),n("el-form-item",{attrs:{label:"链接状态"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.menuStatusChange(t)}},model:{value:e.temp.externalLinkStatus,callback:function(t){e.$set(e.temp,"externalLinkStatus",t)},expression:"temp.externalLinkStatus"}},[n("el-option",{attrs:{label:"待审核",value:0}}),n("el-option",{attrs:{label:"已通过",value:1}}),n("el-option",{attrs:{label:"已拒绝",value:2}})],1)],1),n("el-form-item",{attrs:{label:"打开方式"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.menuStatusChange(t)}},model:{value:e.temp.externalLinkBlank,callback:function(t){e.$set(e.temp,"externalLinkBlank",t)},expression:"temp.externalLinkBlank"}},[n("el-option",{attrs:{label:"空白页面",value:"_blank"}}),n("el-option",{attrs:{label:"父页面",value:"_parent"}}),n("el-option",{attrs:{label:"当前页面",value:"_self"}}),n("el-option",{attrs:{label:"顶层页面",value:"_top"}})],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createData()}}},[e._v(" 确认 ")])],1)],1)],1)},l=[],i=(n("99af"),n("14d9"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{align:"center",label:"ID",width:"65","element-loading-text":"请给我点时间！"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.externalLinkId))])]}}])}),n("el-table-column",{attrs:{width:"180px","show-overflow-tooltip":!0,align:"center",label:"链接名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.externalLinkName))])]}}])}),n("el-table-column",{attrs:{width:"100px","show-overflow-tooltip":!0,align:"center",label:"链接图标"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[n("span",[e._v(e._s(t.row.externalLinkIcon))])])]}}])}),n("el-table-column",{attrs:{width:"180px","show-overflow-tooltip":!0,align:"center",label:"链接地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.externalLinkLink))])]}}])}),n("el-table-column",{attrs:{width:"100px",align:"center",label:"打开方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.externalLinkBlank))])]}}])}),n("el-table-column",{attrs:{width:"150px","show-overflow-tooltip":!0,align:"center",label:"链接描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.externalLinkDesc))])]}}])}),n("el-table-column",{attrs:{width:"100px",align:"center",label:"所属用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top-start",title:t.row.user.userName,width:"200",trigger:"hover",content:t.row.user.autograph}},[n("span",{attrs:{slot:"reference"},slot:"reference"},[n("el-avatar",{staticClass:"cursor",attrs:{src:e.baseUrl+t.row.user.avatar}})],1)])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1===a.externalLinkStatus?n("el-tag",{attrs:{type:"success",effect:"dark"}},[e._v(" 已通过 ")]):0===a.externalLinkStatus?n("el-tag",{attrs:{type:"warning",effect:"dark"}},[e._v(" 待审核 ")]):n("el-tag",{attrs:{type:"danger",effect:"dark"}},[e._v(" 已拒绝 ")])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"210","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1===a.externalLinkStatus?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.updateHandle(a)}}},[e._v(" 编辑 ")]):e._e(),1===a.externalLinkStatus||2===a.externalLinkStatus?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteHandle(a)}}},[e._v(" 删除 ")]):e._e(),0===a.externalLinkStatus?n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.approveHandle(a)}}},[e._v(" 审核 ")]):e._e()]}}])})],1),n("el-pagination",{staticStyle:{"text-align":"end"},attrs:{"current-page":e.pageInfo.pageNum,"page-sizes":[5,10,20,50],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),n("el-dialog",{attrs:{title:"修改",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"120px"}},[n("el-form-item",{attrs:{label:"链接名称",prop:"externalLinkName"}},[n("el-input",{model:{value:e.temp.externalLinkName,callback:function(t){e.$set(e.temp,"externalLinkName",t)},expression:"temp.externalLinkName"}})],1),n("el-form-item",{attrs:{label:"链接地址",prop:"externalLinkLink"}},[n("el-input",{model:{value:e.temp.externalLinkLink,callback:function(t){e.$set(e.temp,"externalLinkLink",t)},expression:"temp.externalLinkLink"}})],1),n("el-form-item",{attrs:{label:"链接描述"}},[n("el-input",{model:{value:e.temp.externalLinkDesc,callback:function(t){e.$set(e.temp,"externalLinkDesc",t)},expression:"temp.externalLinkDesc"}})],1),n("el-form-item",{attrs:{label:"链接图标"}},[n("el-input",{model:{value:e.temp.externalLinkIcon,callback:function(t){e.$set(e.temp,"externalLinkIcon",t)},expression:"temp.externalLinkIcon"}})],1),n("el-form-item",{attrs:{label:"链接状态"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.menuStatusChange(t)}},model:{value:e.temp.externalLinkStatus,callback:function(t){e.$set(e.temp,"externalLinkStatus",t)},expression:"temp.externalLinkStatus"}},[n("el-option",{attrs:{label:"待审核",value:0}}),n("el-option",{attrs:{label:"已通过",value:1}}),n("el-option",{attrs:{label:"已拒绝",value:2}})],1)],1),n("el-form-item",{attrs:{label:"打开方式"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.menuStatusChange(t)}},model:{value:e.temp.externalLinkBlank,callback:function(t){e.$set(e.temp,"externalLinkBlank",t)},expression:"temp.externalLinkBlank"}},[n("el-option",{attrs:{label:"空白页面",value:"_blank"}}),n("el-option",{attrs:{label:"父页面",value:"_parent"}}),n("el-option",{attrs:{label:"当前页面",value:"_self"}}),n("el-option",{attrs:{label:"顶层页面",value:"_top"}})],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateData()}}},[e._v(" 确认 ")])],1)],1),n("el-dialog",{attrs:{title:"审核",visible:e.approveFormVisible},on:{"update:visible":function(t){e.approveFormVisible=t}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{model:e.tempApproveForm,"label-position":"left","label-width":"120px"}},[n("el-form-item",{attrs:{label:"链接状态"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.menuStatusChange(t)}},model:{value:e.tempApproveForm.externalLinkStatus,callback:function(t){e.$set(e.tempApproveForm,"externalLinkStatus",t)},expression:"tempApproveForm.externalLinkStatus"}},[n("el-option",{attrs:{label:"通过",value:1}}),n("el-option",{attrs:{label:"拒绝",value:2}})],1)],1),n("el-form-item",{attrs:{label:"链接描述"}},[n("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.tempApproveForm.externalLinkDesc,callback:function(t){e.$set(e.tempApproveForm,"externalLinkDesc",t)},expression:"tempApproveForm.externalLinkDesc"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.approveFormVisible=!1}}},[e._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.approveLink()}}},[e._v(" 确认 ")])],1)],1)],1)}),r=[],o=(n("25eb"),n("b775")),s=n("da71");function u(e){return Object(o["a"])({url:s["a"]+"/admin/external-link/getExternalFriendLinkList",method:"post",data:e})}function c(e){return Object(o["a"])({url:s["a"]+"/admin/external-link/saveOrUpdateExternalFriendLink",method:"post",data:e})}function p(e){return Object(o["a"])({url:s["a"]+"/admin/external-link/approveExternalFriendLink",method:"post",data:e})}function m(e){return Object(o["a"])({url:s["a"]+"/admin/external-link/deleteExternalFriendLink/".concat(e),method:"delete"})}var d=n("333d"),f={components:{Pagination:d["a"]},props:{type:{type:String,default:"0"}},data:function(){return{baseUrl:s["a"],list:[],total:0,pageInfo:{},listQuery:{pageNum:1,pageSize:5,type:Number.parseInt(this.type)},loading:!1,dialogFormVisible:!1,dialogStatus:"",temp:{externalLinkBlank:"",externalLinkDesc:"",externalLinkIcon:"",externalLinkId:void 0,externalLinkLink:"",externalLinkName:"",externalLinkStatus:1},tempApproveForm:{externalLinkId:void 0,externalLinkStatus:1},rules:{externalLinkName:[{required:!0,message:"链接名称为必填项",trigger:"change"}],externalLinkLink:[{required:!0,message:"链接路径为必传项",trigger:"blur"}]},approveFormVisible:!1}},created:function(){this.getList()},watch:{listQuery:{deep:!0,immediate:!0,handler:function(e,t){this.getList(e)}}},methods:{getList:function(){var e=this;this.loading=!0,this.$emit("create"),u(this.listQuery).then((function(t){e.list=t.data.data,e.total=t.data.total,e.pageInfo=t.data,e.loading=!1}))},approveHandle:function(e){this.tempApproveForm.externalLinkId=e.externalLinkId,this.approveFormVisible=!0},deleteHandle:function(e){var t=this;this.$confirm("确定删除这个链接吗?","删除链接",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(n){m(e.externalLinkId).then((function(){t.$message.success("链接删除成功"),t.getList()}))})).catch((function(e){console.error(e)}))},updateHandle:function(e){var t=this;this.temp=Object.assign({},e),this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},menuStatusChange:function(e){this.$forceUpdate()},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&c(e.temp).then((function(){e.dialogFormVisible=!1,e.$notify({title:"OK",message:"链接修改成功",type:"success",duration:2e3}),e.getList()}))}))},approveLink:function(){var e=this;p(this.tempApproveForm).then((function(t){e.$message.success(t.msg),e.approveFormVisible=!1,e.tempApproveForm={},e.getList()}))},handleSizeChange:function(e){this.listQuery.pageSize=e},handleCurrentChange:function(e){this.listQuery.pageNum=e}}},k=f,g=n("2877"),b=Object(g["a"])(k,i,r,!1,null,null,null),x=b.exports,h={externalLinkBlank:"",externalLinkDesc:"",externalLinkIcon:"",externalLinkId:1,externalLinkLink:"",externalLinkName:"",externalLinkStatus:1},v={name:"FriendLink",components:{TabPane:x},data:function(){return{tabMapOptions:[{label:"待审核",key:"0"},{label:"已通过",key:"1"},{label:"已拒绝",key:"2"}],activeName:"1",createdTimes:0,dialogFormVisible:!1,dialogStatus:"",temp:{externalLinkBlank:"",externalLinkDesc:"",externalLinkIcon:"",externalLinkId:void 0,externalLinkLink:"",externalLinkName:"",externalLinkStatus:1},rules:{externalLinkName:[{required:!0,message:"链接名称为必填项",trigger:"change"}],externalLinkLink:[{required:!0,message:"链接路径为必传项",trigger:"blur"}]}}},watch:{activeName:function(e){this.$router.push("".concat(this.$route.path,"?tab=").concat(e))}},created:function(){var e=this.$route.query.tab;e&&(this.activeName=e)},methods:{showCreatedTimes:function(){this.createdTimes=this.createdTimes+1},menuStatusChange:function(e){this.$forceUpdate()},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&c(e.temp).then((function(){e.dialogFormVisible=!1,e.temp=h,e.$notify({title:"OK",message:"链接新增成功",type:"success",duration:2e3})}))}))}}},L=v,y=(n("dd33"),Object(g["a"])(L,a,l,!1,null,"bd24db56",null));t["default"]=y.exports},dd33:function(e,t,n){"use strict";n("e910")},e910:function(e,t,n){}}]);